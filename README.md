# Анализатор производительности базы данных

Этот скрипт Python анализирует производительность базы данных, измеряя время генерации данных и выполнения запросов для баз данных SQLite. Он включает в себя функциональность для генерации тестовых данных и визуализации показателей производительности.

## Возможности

- Генерирует реалистичные тестовые данные с помощью библиотеки Faker
- Измеряет производительность вставки данных
- Отслеживает время выполнения запросов
- Визуализирует показатели производительности с помощью matplotlib
- Работает с базами данных SQLite
- Поддерживает среду песочницы для безопасного тестирования

## Требования

- Python 3.x
- Требуемые пакеты:
- `sqlite3` (входит в стандартную библиотеку Python)
- `faker` (`pip install faker`)
- `matplotlib` (`pip install matplotlib`)

## Использование

1. Подготовьте файл базы данных SQLite как минимум с одной таблицей (Table_1 или Table_2)
2. Измените переменные `db_path` и `sandbox_path` в скрипте, чтобы они указывали на файлы вашей базы данных
3. Запустите скрипт:
```
python database_performance.py
```
4. При появлении запроса:
- Введите количество строк для генерации
- Выберите таблицу для использование (Table_1 или Table_2)

## Конфигурация

### Основные переменные конфигурации:
- `db_path`: путь к исходной базе данных SQLite
- `sandbox_path`: путь, по которому будет создана копия sandbox

### Структура таблицы:
Скрипт ожидает таблицы со следующими столбцами:
- `name` (текст)
- `age` (целое число)
- `gender` (текст, 'M' или 'W')
- `birth_date` (текст в формате DD.MM.YYYY)
- `phon_number` (текст в формате (XXX) XXX-XXXX)

## Функциональность

### Класс TableManager:
- `generate_rows(n)`: генерирует n строк тестовых данных
- `insert_rows(rows)`: вставляет сгенерированные строки в базу данных
- `clear_table()`: удаляет все данные из таблицы
- `execute_query_with_timing(query)`: выполняет запрос и возвращает время выполнения

### Анализ производительности:
- Измеряет время генерации и вставки данных
- Измеряет время выполнения запроса для операций COUNT
- Генерирует два графика:
1. Время генерации/вставки данных в зависимости от количества строк
2. Время выполнения запроса в зависимости от количества строк

## Примечания

- Скрипт создает изолированную копию вашей базы данных, чтобы избежать изменения оригинала
- Использует русскую локаль для генерации поддельных данных (можно изменить при инициализации Faker)
- Номера телефонов генерируются в формате (XXX) XXX-XXXX
- Даты рождения рассчитываются на основе сгенерированного возраста

## Пример вывода

Скрипт отобразит два графика matplotlib:
1. Показывает, как время генерации данных увеличивается с количеством строк
2. Показывает, как время выполнения запроса изменяется с размером базы данных

## Настройка

Чтобы адаптироваться к различным схемам базы данных:
1. Измените Метод `generate_rows()` должен соответствовать структуре вашей таблицы
2. Обновите запрос вставки в `insert_rows()`
3. Измените тестовый запрос в основном блоке выполнения
